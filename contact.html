<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Contact Us</title>
  <link rel="stylesheet" href="contact.css">
</head>
<body>
  <main>
    <h1>Contact Us</h1>
    <form id="contactForm" novalidate>
      <div class="form-group">
        <label for="name">Full Name <span class="required">*</span></label>
        <input 
          type="text" 
          id="name" 
          data-testid="test-contact-name" 
          required
          aria-describedby="name-error"
        >
        <span 
          id="name-error" 
          class="error-message" 
          data-testid="test-contact-error-name"
          role="alert"
        ></span>
      </div>

      <div class="form-group">
        <label for="email">Email <span class="required">*</span></label>
        <input 
          type="email" 
          id="email" 
          data-testid="test-contact-email" 
          required
          aria-describedby="email-error"
        >
        <span 
          id="email-error" 
          class="error-message" 
          data-testid="test-contact-error-email"
          role="alert"
        ></span>
      </div>

      <div class="form-group">
        <label for="subject">Subject <span class="required">*</span></label>
        <input 
          type="text" 
          id="subject" 
          data-testid="test-contact-subject" 
          required
          aria-describedby="subject-error"
        >
        <span 
          id="subject-error" 
          class="error-message" 
          data-testid="test-contact-error-subject"
          role="alert"
        ></span>
      </div>

      <div class="form-group">
        <label for="message">Message <span class="required">*</span></label>
        <textarea 
          id="message" 
          data-testid="test-contact-message" 
          rows="5" 
          required
          aria-describedby="message-error"
        ></textarea>
        <span 
          id="message-error" 
          class="error-message" 
          data-testid="test-contact-error-message"
          role="alert"
        ></span>
      </div>

      <button 
        type="submit" 
        data-testid="test-contact-submit"
      >
        Send Message
      </button>

      <div 
        id="success-message" 
        class="success-message" 
        data-testid="test-contact-success"
        role="alert"
      ></div>
    </form>
     <div class="contact-btn">
            <a href="index.html">Home</a>
            <a href="about.html">About</a>
        </div>                                                                                                             
  </main>

  <script>
    const form = document.getElementById('contactForm');
    const nameInput = document.getElementById('name');
    const emailInput = document.getElementById('email');
    const subjectInput = document.getElementById('subject');
    const messageInput = document.getElementById('message');
    const successMessage = document.getElementById('success-message');

    const nameError = document.getElementById('name-error');
    const emailError = document.getElementById('email-error');
    const subjectError = document.getElementById('subject-error');
    const messageError = document.getElementById('message-error');

    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

    function clearError(input, errorElement) {
      errorElement.textContent = '';
      input.classList.remove('invalid');
    }

    function showError(input, errorElement, message) {
      errorElement.textContent = message;
      input.classList.add('invalid');
    }

    function validateName() {
      const value = nameInput.value.trim();
      if (value === '') {
        showError(nameInput, nameError, 'Full name is required.');
        return false;
      }
      clearError(nameInput, nameError);
      return true;
    }

    function validateEmail() {
      const value = emailInput.value.trim();
      if (value === '') {
        showError(emailInput, emailError, 'Email is required.');
        return false;
      }
      if (!emailRegex.test(value)) {
        showError(emailInput, emailError, 'Please enter a valid email (e.g., name@example.com).');
        return false;
      }
      clearError(emailInput, emailError);
      return true;
    }

    function validateSubject() {
      const value = subjectInput.value.trim();
      if (value === '') {
        showError(subjectInput, subjectError, 'Subject is required.');
        return false;
      }
      clearError(subjectInput, subjectError);
      return true;
    }

    function validateMessage() {
      const value = messageInput.value.trim();
      if (value === '') {
        showError(messageInput, messageError, 'Message is required.');
        return false;
      }
      if (value.length < 10) {
        showError(messageInput, messageError, 'Message must be at least 10 characters long.');
        return false;
      }
      clearError(messageInput, messageError);
      return true;
    }

    nameInput.addEventListener('blur', validateName);
    emailInput.addEventListener('blur', validateEmail);
    subjectInput.addEventListener('blur', validateSubject);
    messageInput.addEventListener('blur', validateMessage);

    nameInput.addEventListener('input', () => {
      if (nameError.textContent) validateName();
    });
    emailInput.addEventListener('input', () => {
      if (emailError.textContent) validateEmail();
    });
    subjectInput.addEventListener('input', () => {
      if (subjectError.textContent) validateSubject();
    });
    messageInput.addEventListener('input', () => {
      if (messageError.textContent) validateMessage();
    });

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      
      successMessage.classList.remove('show');
      
      const isNameValid = validateName();
      const isEmailValid = validateEmail();
      const isSubjectValid = validateSubject();
      const isMessageValid = validateMessage();
      
      if (isNameValid && isEmailValid && isSubjectValid && isMessageValid) {
        successMessage.textContent = 'Thank you! Your message has been sent successfully.';
        successMessage.classList.add('show');
        
        form.reset();
        
        clearError(nameInput, nameError);
        clearError(emailInput, emailError);
        clearError(subjectInput, subjectError);
        clearError(messageInput, messageError);
        
        successMessage.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
      }
    });
  </script>
</body>
</html>